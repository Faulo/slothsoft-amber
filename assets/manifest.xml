<?xml version="1.0"?>
<assets xmlns="http://schema.slothsoft.net/farah/module">
	<resource-directory name="cli" type="application/vnd.microsoft.portable-executable" />
	<resource-directory name="css" type="text/css" />
	<resource-directory name="js" type="application/javascript" />
	<resource-directory name="xsl" type="application/xslt+xml" />
	<resource-directory name="dictionary" type="application/xml" />
	
	<directory name="schema">
		<resource-directory name="amberdata" type="application/x-xsd+xml" />
	</directory>
	
	<directory name="games">
		<directory name="ambermoon">
			<resource-directory name="release" type="*/*" />
			<resource-directory name="source" type="*/*" />
			<resource-directory name="infoset" type="application/xml" />
			<resource-directory name="convert" type="application/xslt+xml" />
			<fragment name="dictionaries">
				<use-template ref="../../convert/dictionaries"/>
				<use-document ref="/game-resources/dataset?infosetId=dictionaries"/>
			</fragment>
		</directory>
		<resource name="index" type="application/xml" />
	</directory>

	<fragment name="game-resources">
		<custom-asset name="source" executable-builder="Slothsoft\Amber\Assets\SourceBuilder"
			parameter-filter="Slothsoft\Amber\Assets\SourceParameterFilter" />
		<custom-asset name="dataset" executable-builder="Slothsoft\Amber\Assets\DatasetBuilder"
			parameter-filter="Slothsoft\Amber\Assets\DatasetParameterFilter" />
		<custom-asset name="amberdata" executable-builder="Slothsoft\Amber\Assets\AmberdataBuilder"
			parameter-filter="Slothsoft\Amber\Assets\AmberdataParameterFilter" />
		<custom-asset name="gfx" executable-builder="Slothsoft\Amber\Assets\GfxBuilder"
			parameter-filter="Slothsoft\Amber\Assets\GfxParameterFilter" />
		<custom-asset name="stylesheet" executable-builder="Slothsoft\Amber\Assets\StylesheetBuilder"
			parameter-filter="Slothsoft\Amber\Assets\StylesheetParameterFilter" />
		<custom-asset name="editor" executable-builder="Slothsoft\Amber\Assets\EditorBuilder"
			parameter-filter="Slothsoft\Amber\Assets\EditorParameterFilter" />
	</fragment>
	
	<fragment name="game-editor">
		<use-template ref="/xsl/editor" />
		<use-document name="editor" ref="/game-resources/editor" />
		<use-document name="amberdata" ref="/games/ambermoon/dictionaries" />
<!-- 		<use-document name="amberdata" ref="/game-resources/amberdata?infosetId=dictionaries&amp;archiveId" /> -->
		
		<link-stylesheet ref="/css/default"/>
		<link-stylesheet ref="/css/amber-picker"/>
		<link-stylesheet ref="/game-resources/stylesheet"/>
		
		<import ref="//core/api/XSLT"/>
		<link-script ref="/js/SavegameEditor"/>
	</fragment>
	
	<fragment name="game-list">
		<use-template ref="/xsl/editor.data-list" />
		<use-document name="list" ref="/game-resources/amberdata?archiveId" />
		
		<link-stylesheet ref="/css/default"/>
		<link-stylesheet ref="/css/amber-picker"/>
		<link-stylesheet ref="/game-resources/stylesheet"/>
		
		<import ref="//core/api/XSLT"/>
		<link-script ref="/js/SavegameEditor"/>
	</fragment>
	
	<fragment name="game-client">
		<use-template ref="/xsl/game.client" />
		<use-document name="client" ref="/game-resources/amberdata?infosetId=client" />
		
		<link-stylesheet ref="/css/default"/>
		<link-stylesheet ref="/css/amber-picker"/>
		<link-stylesheet ref="/game-resources/stylesheet"/>
		
		<link-script ref="/js/AmberClient"/>
		
		<link-script ref="/js/MapViewer"/>
		<link-script ref="/js/pixijs/pixi.min"/>
			
		<link-script ref="/js/DungeonViewer"/>
		<link-script ref="/js/babylonjs/babylon.custom"/>
	</fragment>

	<fragment name="html">
		<fragment name="description">
			<use-template ref="/xsl/description" name="description" />
			<use-document ref="//farah/sites" name="sites" />
			<import ref="/api/default" name="default" />
			<import ref="/api/MapViewer" name="MapViewer" />
			<import ref="/api/DungeonViewer" name="DungeonViewer" />
		</fragment>
		<fragment name="editor">
			<import ref="/game-editor"/>
<!-- 			<use-template ref="/xsl/editor" /> -->
<!-- 			<import ref="/api/default" name="default" /> -->
<!-- 			<import ref="/api/SavegameEditor" name="SavegameEditor" /> -->
		</fragment>
		<fragment name="resource">
			<import ref="/game-list"/>
		</fragment>
	</fragment>

	<fragment name="api">
		<fragment name="default">
			<link-stylesheet ref="/css/default" name="default" />
			<link-stylesheet ref="/css/amber-picker" name="amber-picker" />
		</fragment>
		<fragment name="SavegameEditor">
			<!-- <custom-asset name="editor" executable-builder="Slothsoft\Amber\Assets\EditorBuilder" parameter-filter="Slothsoft\Amber\Assets\EditorParameterFilter"/> -->
			<use-document name="editor" ref="/game-resources/dataset?infosetId=save-editor" />
			<use-document name="amberdata" ref="/game-resources/amberdata?infosetId=dictionaries" />
			<import ref="//core/api/XSLT" name="XSLT" />
			<link-script ref="/js/SavegameEditor" name="SavegameEditor" />
		</fragment>
		<fragment name="MapViewer">
			<link-script ref="/js/MapViewer" name="MapViewer" />
			<link-script ref="/js/pixijs/pixi.min" name="pixi.min" />
		</fragment>
		<fragment name="DungeonViewer">
			<link-script ref="/js/DungeonViewer" name="DungeonViewer" />
			<link-script ref="/js/babylonjs/babylon.custom" name="babylon.custom" />
		</fragment>
	</fragment>




	<!-- <resource-directory name="pages" path="pages" type="application/xml"/> <resource-directory name="data" path="data" 
		type="application/x-php"/> <directory name="static"> <resource name="sites.mod" path="sites.mod.xml" type="application/xml"/> 
		<resource name="editor" path="editor.xml" type="application/xml"/> <resource name="config" path="config.json" type="application/json"/> 
		<resource name="charStruc" path="charStruc.xml" type="application/xml"/> <resource name="partyStruc" path="partyStruc.xml" 
		type="application/xml"/> <resource name="AmbermoonSavegame" path="ambermoon/structure.xml" type="application/xml"/> <resource 
		name="items-map" path="AmbermoonItems.png" type="image/png"/> <resource name="portraits-map" path="AmbermoonPortraits.png" 
		type="image/png"/> <resource name="AmbermoonItems" path="ambermoon\Thalion-v1.05-DE\lib\items.xml" type="application/xml"/> 
		<resource name="AmbermoonPortraits" path="AmbermoonPortraits.xml" type="application/xml"/> <resource-directory name="saves" 
		path="save" type="application/octet-stream"/> <resource-directory name="portraits" path="portraits" type="image/png"/> <resource-directory 
		name="items" path="items" type="image/png"/> <resource-directory name="tilesets" path="tilesets" type="image/png"/> <resource-directory 
		name="monster-gfx" path="monster-gfx" type="image/png"/> <resource-directory name="patch" path="patches" type="*/*"/> </directory> -->
</assets>
